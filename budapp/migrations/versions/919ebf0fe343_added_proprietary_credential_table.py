"""Added Proprietary Credential Table.

Revision ID: 919ebf0fe343
Revises: 42e713425e99
Create Date: 2024-11-29 01:52:40.038500

"""

from typing import Sequence, Union

import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql


# revision identifiers, used by Alembic.
revision: str = "919ebf0fe343"
down_revision: Union[str, None] = "42e713425e99"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    sa.Enum(
        "nlp_cloud",
        "deepinfra",
        "anthropic",
        "vertex_ai-vision-models",
        "vertex_ai-ai21_models",
        "cerebras",
        "watsonx",
        "predibase",
        "volcengine",
        "clarifai",
        "baseten",
        "sambanova",
        "github",
        "petals",
        "replicate",
        "vertex_ai-chat-models",
        "azure_ai",
        "perplexity",
        "vertex_ai-code-text-models",
        "vertex_ai-text-models",
        "palm",
        "cohere_chat",
        "vertex_ai-embedding-models",
        "text-completion-openai",
        "groq",
        "openai",
        "aleph_alpha",
        "sagemaker",
        "databricks",
        "fireworks_ai",
        "vertex_ai-anthropic_models",
        "vertex_ai-mistral_models",
        "voyage",
        "vertex_ai-language-models",
        "anyscale",
        "deepseek",
        "vertex_ai-image-models",
        "mistral",
        "ollama",
        "cohere",
        "gemini",
        "friendliai",
        "vertex_ai-code-chat-models",
        "azure",
        "codestral",
        "vertex_ai-llama_models",
        "together_ai",
        "cloudflare",
        "ai21",
        "openrouter",
        "bedrock",
        "text-completion-codestral",
        "huggingface",
        name="proprietary_credential_type_enum",
    ).create(op.get_bind())
    op.create_table(
        "proprietary_credential",
        sa.Column("id", sa.Uuid(), nullable=False),
        sa.Column("name", sa.String(), nullable=False),
        sa.Column("user_id", sa.Uuid(), nullable=False),
        sa.Column(
            "type",
            postgresql.ENUM(
                "nlp_cloud",
                "deepinfra",
                "anthropic",
                "vertex_ai-vision-models",
                "vertex_ai-ai21_models",
                "cerebras",
                "watsonx",
                "predibase",
                "volcengine",
                "clarifai",
                "baseten",
                "sambanova",
                "github",
                "petals",
                "replicate",
                "vertex_ai-chat-models",
                "azure_ai",
                "perplexity",
                "vertex_ai-code-text-models",
                "vertex_ai-text-models",
                "palm",
                "cohere_chat",
                "vertex_ai-embedding-models",
                "text-completion-openai",
                "groq",
                "openai",
                "aleph_alpha",
                "sagemaker",
                "databricks",
                "fireworks_ai",
                "vertex_ai-anthropic_models",
                "vertex_ai-mistral_models",
                "voyage",
                "vertex_ai-language-models",
                "anyscale",
                "deepseek",
                "vertex_ai-image-models",
                "mistral",
                "ollama",
                "cohere",
                "gemini",
                "friendliai",
                "vertex_ai-code-chat-models",
                "azure",
                "codestral",
                "vertex_ai-llama_models",
                "together_ai",
                "cloudflare",
                "ai21",
                "openrouter",
                "bedrock",
                "text-completion-codestral",
                "huggingface",
                name="proprietary_credential_type_enum",
                create_type=False,
            ),
            nullable=False,
        ),
        sa.Column("other_provider_creds", postgresql.JSONB(astext_type=sa.Text()), nullable=True),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("modified_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["user_id"], ["user.id"], name=op.f("fk_proprietary_credential_user_id_user"), ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("id", name=op.f("pk_proprietary_credential")),
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table("proprietary_credential")
    sa.Enum(
        "nlp_cloud",
        "deepinfra",
        "anthropic",
        "vertex_ai-vision-models",
        "vertex_ai-ai21_models",
        "cerebras",
        "watsonx",
        "predibase",
        "volcengine",
        "clarifai",
        "baseten",
        "sambanova",
        "github",
        "petals",
        "replicate",
        "vertex_ai-chat-models",
        "azure_ai",
        "perplexity",
        "vertex_ai-code-text-models",
        "vertex_ai-text-models",
        "palm",
        "cohere_chat",
        "vertex_ai-embedding-models",
        "text-completion-openai",
        "groq",
        "openai",
        "aleph_alpha",
        "sagemaker",
        "databricks",
        "fireworks_ai",
        "vertex_ai-anthropic_models",
        "vertex_ai-mistral_models",
        "voyage",
        "vertex_ai-language-models",
        "anyscale",
        "deepseek",
        "vertex_ai-image-models",
        "mistral",
        "ollama",
        "cohere",
        "gemini",
        "friendliai",
        "vertex_ai-code-chat-models",
        "azure",
        "codestral",
        "vertex_ai-llama_models",
        "together_ai",
        "cloudflare",
        "ai21",
        "openrouter",
        "bedrock",
        "text-completion-codestral",
        "huggingface",
        name="proprietary_credential_type_enum",
    ).drop(op.get_bind())
    # ### end Alembic commands ###
